---

title: Problem preprocessing


keywords: fastai
sidebar: home_sidebar



nb_path: "notebooks/preprocessing/1_problem_preprocessing.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/preprocessing/1_problem_preprocessing.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ProblemPreprocessing" class="doc_header"><code>class</code> <code>ProblemPreprocessing</code><a href="dl4to/preprocessing.py#L113" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ProblemPreprocessing</code>(<strong><code>name</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>normalize</code></strong>:<code>bool</code>=<em><code>False</code></em>) :: <a href="/dl4topreprocessing.html#Preprocessing"><code>Preprocessing</code></a></p>
</blockquote>
<p>A parent class for several problem preprocessing strategies.
Problem preprocessing processes the data based on problem specific information like forces and boundary conditions.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>name</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>The name of the preprocessing.</td>
</tr>
<tr>
<td><strong><code>normalize</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to normalize the output of the preprocessing.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ProblemPreprocessing.__call__" class="doc_header"><code>ProblemPreprocessing.__call__</code><a href="dl4to/preprocessing.py#L127" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ProblemPreprocessing.__call__</code>(<strong><code>problem_or_solution</code></strong>:<code>Union</code>[<code>ForwardRef('dl4to.problem.Problem')</code>, <code>ForwardRef('dl4to.solution.Solution')</code>])</p>
</blockquote>
<p>Applies the preprocessing to a problem or solution object. Returns a <code>torch.Tensor</code> object.
If a solution object is passed, then it is automatically converted to a problem object via <code>solution.problem</code>.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>problem_or_solution</code></strong></td>
<td><code>typing.Union[ForwardRef('dl4to.problem.Problem'), ForwardRef('dl4to.solution.Solution')]</code></td>
<td></td>
<td>A problem or solution object.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TrivialPreprocessing" class="doc_header"><code>class</code> <code>TrivialPreprocessing</code><a href="dl4to/preprocessing.py#L138" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TrivialPreprocessing</code>(<strong><code>normalize</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>dataset</code></strong>:<code>dl4to.datasets.TopoDataset</code>=<em><code>None</code></em>) :: <a href="/dl4toproblem_preprocessing.html#ProblemPreprocessing"><code>ProblemPreprocessing</code></a></p>
</blockquote>
<p>The output of trivial preprocessing [1] is a 7-channel tensor which results from the channel-wise concatenation of Dirichlet boundary conditions, design space information and loads.
It is possible to normalize each sample’s F via the infinity norm over all forces in a dataset.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>normalize</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to normalize the forces in the output of the preprocessing. If True, then a dataset is required.</td>
</tr>
<tr>
<td><strong><code>dataset</code></strong></td>
<td><code>dl4to.datasets.TopoDataset</code></td>
<td><code>None</code></td>
<td>A dataset that is used for the normalization of the forces in the output of the preprocessing. Is only used if <code>normalize=True</code>.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ForcePreprocessing" class="doc_header"><code>class</code> <code>ForcePreprocessing</code><a href="dl4to/preprocessing.py#L188" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ForcePreprocessing</code>(<strong><code>normalize</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>dataset</code></strong>:<code>dl4to.datasets.TopoDataset</code>=<em><code>None</code></em>) :: <a href="/dl4toproblem_preprocessing.html#ProblemPreprocessing"><code>ProblemPreprocessing</code></a></p>
</blockquote>
<p>The input of the neural network is the 3-channel force tensor F.
It is possible to normalize each sample’s F via the mean absolute maximum over a dataset.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>normalize</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to normalize the forces in the output of the preprocessing. If True, then a dataset is required.</td>
</tr>
<tr>
<td><strong><code>dataset</code></strong></td>
<td><code>dl4to.datasets.TopoDataset</code></td>
<td><code>None</code></td>
<td>A dataset that is used for the normalization of the forces in the output of the preprocessing. Is only used if <code>normalize=True</code>.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ConvexHullPreprocessing" class="doc_header"><code>class</code> <code>ConvexHullPreprocessing</code><a href="dl4to/preprocessing.py#L236" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ConvexHullPreprocessing</code>() :: <a href="/dl4toproblem_preprocessing.html#ProblemPreprocessing"><code>ProblemPreprocessing</code></a></p>
</blockquote>
<p>The convex hull of a binary image is the set of pixels included in the smallest convex polygon that surround all white pixels in the input.
Convex hull preprocessing [1] generalizes this to 3d voxels and constructs a polygon with density 1 that connects the force allocation points to points with homogeneous Dirichlet boundary conditions.
This binary density polygon is the output of this preprocessing.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="References">References<a class="anchor-link" href="#References"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[1] Dittmer, Sören, et al. "SELTO: Sample-Efficient Learned Topology Optimization." arXiv preprint arXiv:2209.05098 (2022).</p>

</div>
</div>
</div>
</div>
 

