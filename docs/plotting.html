---

title: 3D plotting


keywords: fastai
sidebar: home_sidebar



nb_path: "notebooks/plotting/3d_plotting.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/plotting/3d_plotting.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_scalar_field" class="doc_header"><code>plot_scalar_field</code><a href="dl4to/plotting.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_scalar_field</code>(<strong><code>problem</code></strong>:<code>dl4to.problem.Problem</code>, <strong><code>scalar_field</code></strong>:<code>Tensor</code>, <strong><code>data</code></strong>:<code>Tensor</code>=<em><code>None</code></em>, <strong><code>title</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>file_path</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>threshold</code></strong>:<code>float</code>=<em><code>0.5</code></em>, <strong><code>display</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>camera_position</code></strong>:<code>Union</code>[<code>tuple</code>, <code>list</code>]=<em><code>(0, 0.1, 0.12)</code></em>, <strong><code>show_design_space</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>show_colorbar</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>colorscale</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>show_axislabels</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>show_ticklabels</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>export_png</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Plots a three-dimensional scalar field visualization. Returns a <code>plotly.graph_objs.FigureWidget</code> object.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>problem</code></strong></td>
<td><code>dl4to.problem.Problem</code></td>
<td></td>
<td>The problem that is referred to for plotting.</td>
</tr>
<tr>
<td><strong><code>scalar_field</code></strong></td>
<td><code>Tensor</code></td>
<td></td>
<td>The scalar field that determines the presence or absence of voxels.</td>
</tr>
<tr>
<td><strong><code>data</code></strong></td>
<td><code>Tensor</code></td>
<td><code>None</code></td>
<td>The data that should be represented in color on the voxels.</td>
</tr>
<tr>
<td><strong><code>title</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>The name of the plot.</td>
</tr>
<tr>
<td><strong><code>file_path</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>Path where the figure is saved.</td>
</tr>
<tr>
<td><strong><code>threshold</code></strong></td>
<td><code>float</code></td>
<td><code>0.5</code></td>
<td>The threshold below which voxels are not displayed, i.e., represented as void.</td>
</tr>
<tr>
<td><strong><code>display</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Whether the figure is displayed.</td>
</tr>
<tr>
<td><strong><code>camera_position</code></strong></td>
<td><code>typing.Union[tuple, list]</code></td>
<td><code>(0, 0.1, 0.12)</code></td>
<td>x, y, and z coordinates of the camera position.</td>
</tr>
<tr>
<td><strong><code>show_design_space</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to highlight the voxels that have a design space information of -1 assigned to them.</td>
</tr>
<tr>
<td><strong><code>show_colorbar</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Determines whether a reference colorbar is displayed for the plotted voxel color values.</td>
</tr>
<tr>
<td><strong><code>colorscale</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>The name of the colorscale that is used for plotting.</td>
</tr>
<tr>
<td><strong><code>show_axislabels</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether the 3d axes are labelled with their dimensions.</td>
</tr>
<tr>
<td><strong><code>show_ticklabels</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether the 3d axes ticks are displayed and labeled.</td>
</tr>
<tr>
<td><strong><code>export_png</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether the figure is exported and saved as a png file, in addition to the standard html format.</td>
</tr>
<tr>
<td><strong><code>kwargs</code></strong></td>
<td></td>
<td></td>
<td><em>No Content</em></td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="pyvista_plot_scalar_field" class="doc_header"><code>pyvista_plot_scalar_field</code><a href="dl4to/plotting.py#L167" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>pyvista_plot_scalar_field</code>(<strong><code>problem</code></strong>:<code>dl4to.problem.Problem</code>, <strong><code>scalar_field</code></strong>:<code>Tensor</code>, <strong><code>data</code></strong>:<code>Tensor</code>=<em><code>None</code></em>, <strong><code>title</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>threshold</code></strong>:<code>float</code>=<em><code>0.5</code></em>, <strong><code>display</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>camera_position</code></strong>:<code>Union</code>[<code>tuple</code>, <code>list</code>]=<em><code>(0, 0.1, 0.12)</code></em>, <strong><code>show_design_space</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>window_size</code></strong>:<code>Union</code>[<code>tuple</code>, <code>list</code>]=<em><code>(800, 800)</code></em>, <strong><code>smooth_iters</code></strong>:<code>int</code>=<em><code>0</code></em>, <strong><code>taubin_smoothing</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>taubin_pass_band</code></strong>:<code>float</code>=<em><code>0.1</code></em>, <strong><code>show_edges</code></strong>:<code>bool</code>=<em><code>True</code></em>)</p>
</blockquote>
<p>Plots a three-dimensional scalar field visualization using pyvista. Returns a <code>pyvista.plotting.plotting.Plotter</code> object.
Pyvista plotting leads to better looking visualizations than the standard plotly interface. This is mainly due to the fact, that pyvista integrates Taubin smoothing [1].
However, the pyvista interface also has its downsides: In our experiments we found that only the backend 'pythreejs' worked for us.
This backend unfortunately currently does not support several basic functionalities. This includes for instance the display of color bars and plot titles as well as the option to save generated plots.
Therefore, the plots need to be saved via manual screenshots. We still decided to leave this class a part of the DL4TO library, since the visualizations
are much better looking for publications than the default plotly interface. it is possible that the missing features will be added in the future, if pyvista adds them to their
pythreejs backend or we somehow manage to make a different backend work.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>problem</code></strong></td>
<td><code>dl4to.problem.Problem</code></td>
<td></td>
<td>The problem that is referred to for plotting.</td>
</tr>
<tr>
<td><strong><code>scalar_field</code></strong></td>
<td><code>Tensor</code></td>
<td></td>
<td>The scalar field that determines the presence or absence of voxels.</td>
</tr>
<tr>
<td><strong><code>data</code></strong></td>
<td><code>Tensor</code></td>
<td><code>None</code></td>
<td>The data that should be represented in color on the voxels.</td>
</tr>
<tr>
<td><strong><code>title</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>The name of the plot.</td>
</tr>
<tr>
<td><strong><code>threshold</code></strong></td>
<td><code>float</code></td>
<td><code>0.5</code></td>
<td>The threshold below which voxels are not displayed, i.e., represented as void.</td>
</tr>
<tr>
<td><strong><code>display</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Whether the figure is displayed.</td>
</tr>
<tr>
<td><strong><code>camera_position</code></strong></td>
<td><code>typing.Union[tuple, list]</code></td>
<td><code>(0, 0.1, 0.12)</code></td>
<td>x, y, and z coordinates of the camera position.</td>
</tr>
<tr>
<td><strong><code>show_design_space</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to highlight the voxels that have a design space information of -1 assigned to them.</td>
</tr>
<tr>
<td><strong><code>window_size</code></strong></td>
<td><code>typing.Union[tuple, list]</code></td>
<td><code>(800, 800)</code></td>
<td>The size of the window that displays the plot</td>
</tr>
<tr>
<td><strong><code>smooth_iters</code></strong></td>
<td><code>int</code></td>
<td><code>0</code></td>
<td>The number of smoothing iterations for better looking visualizations. Note that the number of smoothing iterations can be reduced if Taubin smoothing is used. This is because it is more efficient than Laplacian smoothing.</td>
</tr>
<tr>
<td><strong><code>taubin_smoothing</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Whether to use Taubin smoothing. If <code>False</code>, then Laplacian smoothing is used. Taubin smoothing has the advantage that it is volume preserving, i.e., a higher number of smoothing iterations does not lead to thiner structures. Only has an effect if <code>smooth_iters &gt; 0</code>.</td>
</tr>
<tr>
<td><strong><code>taubin_pass_band</code></strong></td>
<td><code>float</code></td>
<td><code>0.1</code></td>
<td>The passband value for the windowed sinc filter. This should be between 0 and 2, where lower values cause more smoothing.</td>
</tr>
<tr>
<td><strong><code>show_edges</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Whether to display the edges of the underlying grid.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Input <span class="ansi-green-fg">In [2]</span>, in <span class="ansi-cyan-fg">&lt;cell line: 2&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span style="color: rgb(95,135,135)">#export</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">pyvista_plot_scalar_field</span>(
<span class="ansi-green-intense-fg ansi-bold">      3</span>     problem:<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">dl4to.problem.Problem</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(95,135,135)"># The problem that is referred to for plotting.</span>
<span class="ansi-green-fg">----&gt; 4</span>     scalar_field:<span class="ansi-yellow-bg">torch</span><span style="color: rgb(98,98,98)">.</span>Tensor, <span style="color: rgb(95,135,135)"># The scalar field that determines the presence or absence of voxels.</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     data:torch<span style="color: rgb(98,98,98)">.</span>Tensor<span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">None</span>, <span style="color: rgb(95,135,135)"># The data that should be represented in color on the voxels.</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span>     title:<span style="color: rgb(0,135,0)">str</span><span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">None</span>, <span style="color: rgb(95,135,135)"># The name of the plot.</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>     threshold:<span style="color: rgb(0,135,0)">float</span><span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">.5</span>, <span style="color: rgb(95,135,135)"># The threshold below which voxels are not displayed, i.e., represented as void.</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>     display:<span style="color: rgb(0,135,0)">bool</span><span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">True</span>, <span style="color: rgb(95,135,135)"># Whether the figure is displayed.</span>
<span class="ansi-green-intense-fg ansi-bold">      9</span>     camera_position:Union[<span style="color: rgb(0,135,0)">tuple</span>,<span style="color: rgb(0,135,0)">list</span>]<span style="color: rgb(98,98,98)">=</span>(<span style="color: rgb(98,98,98)">0</span>,<span style="color: rgb(98,98,98)">.1</span>,<span style="color: rgb(98,98,98)">.12</span>), <span style="color: rgb(95,135,135)"># x, y, and z coordinates of the camera position.</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span>     show_design_space:<span style="color: rgb(0,135,0)">bool</span><span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">False</span>, <span style="color: rgb(95,135,135)"># Whether to highlight the voxels that have a design space information of -1 assigned to them.</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span>     window_size:Union[<span style="color: rgb(0,135,0)">tuple</span>,<span style="color: rgb(0,135,0)">list</span>]<span style="color: rgb(98,98,98)">=</span>(<span style="color: rgb(98,98,98)">800</span>,<span style="color: rgb(98,98,98)">800</span>), <span style="color: rgb(95,135,135)"># The size of the window that displays the plot</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span>     smooth_iters:<span style="color: rgb(0,135,0)">int</span><span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">0</span>, <span style="color: rgb(95,135,135)"># The number of smoothing iterations for better looking visualizations. Note that the number of smoothing iterations can be reduced if Taubin smoothing is used. This is because it is more efficient than Laplacian smoothing.</span>
<span class="ansi-green-intense-fg ansi-bold">     13</span>     taubin_smoothing:<span style="color: rgb(0,135,0)">bool</span><span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">True</span>, <span style="color: rgb(95,135,135)"># Whether to use Taubin smoothing. If `False`, then Laplacian smoothing is used. Taubin smoothing has the advantage that it is volume preserving, i.e., a higher number of smoothing iterations does not lead to thiner structures. Only has an effect if `smooth_iters &gt; 0`.</span>
<span class="ansi-green-intense-fg ansi-bold">     14</span>     taubin_pass_band:<span style="color: rgb(0,135,0)">float</span><span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">.1</span>, <span style="color: rgb(95,135,135)"># The passband value for the windowed sinc filter. This should be between 0 and 2, where lower values cause more smoothing.</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span>     show_edges:<span style="color: rgb(0,135,0)">bool</span><span style="color: rgb(98,98,98)">=</span><span class="ansi-bold" style="color: rgb(0,135,0)">True</span>, <span style="color: rgb(95,135,135)"># Whether to display the edges of the underlying grid.</span>
<span class="ansi-green-intense-fg ansi-bold">     16</span> ):
<span class="ansi-green-intense-fg ansi-bold">     17</span> <span style="color: rgb(188,188,188)">    </span><span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span> <span style="color: rgb(175,0,0)">    Plots a three-dimensional scalar field visualization using pyvista. Returns a `pyvista.plotting.plotting.Plotter` object.</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span style="color: rgb(175,0,0)">    Pyvista plotting leads to better looking visualizations than the standard plotly interface. This is mainly due to the fact, that pyvista integrates Taubin smoothing [1].</span>
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">     24</span> <span style="color: rgb(175,0,0)">    pythreejs backend or we somehow manage to make a different backend work.</span>
<span class="ansi-green-intense-fg ansi-bold">     25</span> <span style="color: rgb(175,0,0)">    &#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     26</span>     scalar_field <span style="color: rgb(98,98,98)">=</span> np<span style="color: rgb(98,98,98)">.</span>where(scalar_field <span style="color: rgb(98,98,98)">&lt;</span> threshold<span style="color: rgb(98,98,98)">+</span><span style="color: rgb(98,98,98)">1e-9</span>, <span style="color: rgb(98,98,98)">0.</span>, <span style="color: rgb(98,98,98)">1.</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;torch&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_vector_field" class="doc_header"><code>plot_vector_field</code><a href="dl4to/plotting.py#L238" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_vector_field</code>(<strong><code>problem</code></strong>:<code>dl4to.problem.Problem</code>, <strong><code>vector_field</code></strong>:<code>Tensor</code>, <strong><code>title</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>file_path</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>display</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>camera_position</code></strong>:<code>Union</code>[<code>tuple</code>, <code>list</code>]=<em><code>(0, 0.1, 0.12)</code></em>, <strong><code>show_colorbar</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>colorscale</code></strong>:<code>str</code>=<em><code>'Blues'</code></em>, <strong><code>show_axislabels</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>show_ticklabels</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>export_png</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>
<p>Plots a three-dimensional vector field visualization. Returns a <code>plotly.graph_objs.FigureWidget</code> object.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>problem</code></strong></td>
<td><code>dl4to.problem.Problem</code></td>
<td></td>
<td>The problem that is referred to for plotting.</td>
</tr>
<tr>
<td><strong><code>vector_field</code></strong></td>
<td><code>Tensor</code></td>
<td></td>
<td>The vector field that should be displayed with 3d arrows.</td>
</tr>
<tr>
<td><strong><code>title</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>The name of the plot.</td>
</tr>
<tr>
<td><strong><code>file_path</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>Path where the figure is saved.</td>
</tr>
<tr>
<td><strong><code>display</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Whether the figure is displayed.</td>
</tr>
<tr>
<td><strong><code>camera_position</code></strong></td>
<td><code>typing.Union[tuple, list]</code></td>
<td><code>(0, 0.1, 0.12)</code></td>
<td>x, y, and z coordinates of the camera position.</td>
</tr>
<tr>
<td><strong><code>show_colorbar</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Determines whether a reference colorbar is displayed for the plotted voxel color values.</td>
</tr>
<tr>
<td><strong><code>colorscale</code></strong></td>
<td><code>str</code></td>
<td><code>Blues</code></td>
<td>The name of the colorscale that is used for plotting.</td>
</tr>
<tr>
<td><strong><code>show_axislabels</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether the 3d axes are labelled with their dimensions.</td>
</tr>
<tr>
<td><strong><code>show_ticklabels</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether the 3d axes ticks are displayed and labeled.</td>
</tr>
<tr>
<td><strong><code>export_png</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether the figure is exported and saved as a png file, in addition to the standard html format.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="References">References<a class="anchor-link" href="#References"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[1] Taubin, Gabriel. "Curve and surface smoothing without shrinkage." Proceedings of IEEE international conference on computer vision. IEEE, 1995.</p>

</div>
</div>
</div>
</div>
 

