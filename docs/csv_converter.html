---

title: CSV converter


keywords: fastai
sidebar: home_sidebar



nb_path: "notebooks/datasets/0_csv_converter.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/datasets/0_csv_converter.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CSVConverter" class="doc_header"><code>class</code> <code>CSVConverter</code><a href="dl4to/datasets.py#L18" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CSVConverter</code>(<strong><code>csv_dir_path</code></strong>:<code>str</code>, <strong><code>dtype</code></strong>:<code>dtype</code>=<em><code>torch.float32</code></em>, <strong><code>verbose</code></strong>:<code>bool</code>=<em><code>True</code></em>, <strong><code>pde_solver</code></strong>:<code>pd4to.pde.PDESolver</code>=<em><code>None</code></em>, <strong><code>solve_pde_for_trivial_solution</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>solve_pde_for_gt_solution</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>
<p>The purpose of the CSVConverter class is to convert csv files into TO problems. For each problem there should be two csv files:
one that contains all voxel-wise information (forces, design space, Dirichlet conditions and ground truth densities) and one "_info" file that contains all scalar information (Young's modulus E, Poisson's ratio ν, yield stress σ_ys and voxel size h).
The names of the files should start with 0 and increase, so the files for the first sample are "0.csv" and "0_info.csv", the files for the second sample are "1.csv" and "1_info.csv" and so one. For more information on the exact formating we refer to
the SELTO datasets [1].</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>csv_dir_path</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>The path to the directory that contains files named as "i.pt" and "i_info.pt" where i is an integer, starting at i=0 for the first sample.</td>
</tr>
<tr>
<td><strong><code>dtype</code></strong></td>
<td><code>dtype</code></td>
<td><code>torch.float32</code></td>
<td>The datatype into which the values from the csv files are converted.</td>
</tr>
<tr>
<td><strong><code>verbose</code></strong></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Whether to give the user feedback on the progress.</td>
</tr>
<tr>
<td><strong><code>pde_solver</code></strong></td>
<td><code>pd4to.pde.PDESolver</code></td>
<td><code>None</code></td>
<td>The pde solver that is used to solve the PDE for linear elasticity. Only has an effect if either <code>solve_pde_for_trivial_solution=True</code> or <code>solve_pde_for_gt_solution=True</code>.</td>
</tr>
<tr>
<td><strong><code>solve_pde_for_trivial_solution</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to solve the PDE for each trivial solution and save the displacements in the solution object. These can later be accessed via <code>problem.trivial_solution.u</code>. This is useful if PDE preprocessing is used. Requires a pde solver.</td>
</tr>
<tr>
<td><strong><code>solve_pde_for_gt_solution</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to solve the PDE for each ground truth and save the displacements in the solution object. These can later be accessed via <code>gt_solution.u</code>. Requires a pde solver.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Methods">Methods<a class="anchor-link" href="#Methods"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CSVConverter.__len__" class="doc_header"><code>CSVConverter.__len__</code><a href="dl4to/datasets.py#L63" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>CSVConverter.__len__</code>()</p>
</blockquote>
<p>Returns the number of file pairs <code>(i.csv, i_info.csv)</code> that are contained in <code>self.csv_dir_path</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CSVConverter.__getitem__" class="doc_header"><code>CSVConverter.__getitem__</code><a href="dl4to/datasets.py#L76" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>CSVConverter.__getitem__</code>(<strong><code>idx</code></strong>:<code>int</code>)</p>
</blockquote>
<p>Returns the tuple <code>(problem, gt_solution)</code> for index <code>idx</code>.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>idx</code></strong></td>
<td><code>int</code></td>
<td></td>
<td>The index for which <code>(problem, gt_solution)</code> should be returned.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CSVConverter.__call__" class="doc_header"><code>CSVConverter.__call__</code><a href="dl4to/datasets.py#L158" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>CSVConverter.__call__</code>(<strong><code>pt_dir_path</code></strong>:<code>str</code>=<em><code>None</code></em>)</p>
</blockquote>
<p>Converts all <code>(i.csv, i_info.csv)</code> pairs in <code>csv_dir_path</code> and saves them as <code>.pt</code> files in the directory <code>pt_dir_path</code>.</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>pt_dir_path</code></strong></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>The path where the <code>.pt</code> files should be saved.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="References">References<a class="anchor-link" href="#References"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>[1] Dittmer, Sören, Erzmann, David, Harms, Henrik, Falck, Rielson, &amp; Gosch, Marco. (2023). SELTO Dataset [Data set]. Zenodo. <a href="https://doi.org/10.5281/zenodo.7781392">https://doi.org/10.5281/zenodo.7781392</a></p>

</div>
</div>
</div>
</div>
 

